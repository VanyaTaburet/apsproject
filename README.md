# Vagonach

**Vagonach** ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∞–Ω–æ–Ω–∏–º–Ω—ã–π —Ñ–æ—Ä—É–º (imageboard), –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –ø—Ä–æ—Å—Ç–æ—Ç—É —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è.
–ü—Ä–æ–µ–∫—Ç –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º–∏ –∏–º–∏–¥–∂–±–æ—Ä–¥–∞–º–∏ (2channel, 4chan) –∏ —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –∏–∑–±–µ–≥–∞–µ—Ç —Ç—è–∂—ë–ª—ã—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

---

## –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

* **–°–∞–ª–∞–º–∞—Ç–æ–≤ –ò–≤–∞–Ω**
* **–Æ—Ä—å–µ–≤ –ë–æ–≥–¥–∞–Ω**
* **–§–µ–¥—É–Ω–æ–≤ –í–ª–∞–¥–∏–º–∏—Ä**

---

## 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–æ—Ä—É–º—ã –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º, —Å–ª–æ–∂–Ω–æ–π –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –ª–æ–≥–∏–∫–æ–π –∏ —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ —Ä–æ—Å—Ç—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é. –ü—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —É—Å—Ç–æ–π—á–∏–≤—ã–π —Å–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π, –±—ã—Å—Ç—Ä—ã–π –∏ –∞–Ω–æ–Ω–∏–º–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ–±—â–µ–Ω–∏—è.


---

## 2. –í—ã—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å–æ–∫, —Ç—Ä–µ–¥–æ–≤ –∏ –ø–æ—Å—Ç–æ–≤ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
* –ê–Ω–æ–Ω–∏–º–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–¥–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
* –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä (Reader)**
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å–æ–∫ –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–¥–æ–≤ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –¥–∏—Å–∫—É—Å—Å–∏—é.

2. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è (Poster)**
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ç—Ä–µ–¥ –∏–ª–∏ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º, –ø—Ä–∏–∫—Ä–µ–ø–ª—è—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–¥–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–∏–º –æ–±—Å—É–∂–¥–µ–Ω–∏—è–º.

4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**
   –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–¥–∞–ª—è–µ—Ç —Å–ø–∞–º, –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç –≤–∞–∂–Ω—ã–µ —Ç—Ä–µ–¥—ã –∏–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 3.1 –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

**Backend**

* Go (Golang) ‚Äî HTTP-—Å–µ—Ä–≤–µ—Ä, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
* PostgreSQL ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ—Å–æ–∫, —Ç—Ä–µ–¥–æ–≤, –ø–æ—Å—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**Frontend**

* HTML Templates ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü
* HTMX ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–µ–∑ SPA-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
* CSS ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –¥–æ—Å–æ–∫, —Ç—Ä–µ–¥–æ–≤ –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)

---

### 3.2 –•–∞—Ä–∞–∫—Ç–µ—Ä –Ω–∞–≥—Ä—É–∑–∫–∏

–ü—Ä–æ–µ–∫—Ç –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É **read-heavy —Å–∏—Å—Ç–µ–º**.

* **–ß—Ç–µ–Ω–∏–µ (~90%)**: –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–ø–∏—Å–∫–∏ —Ç—Ä–µ–¥–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–µ–¥–æ–≤ –∏ –ø–æ—Å—Ç–æ–≤
* **–ó–∞–ø–∏—Å—å (~10%)**: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–¥–æ–≤, –ø–æ—Å—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

---

### 3.3 –û—Ü–µ–Ω–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

–ü—Ä–∏–Ω—è—Ç–∞ —Å–ª–µ–¥—É—é—â–∞—è –º–æ–¥–µ–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏:

* 10 000 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤ —Å—É—Ç–∫–∏
* 20 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* 2 000 –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ —Å—É—Ç–∫–∏
* 400 –Ω–æ–≤—ã—Ö —Ç—Ä–µ–¥–æ–≤ –≤ —Å—É—Ç–∫–∏

**HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã**

* –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ~25 KB
* 200 000 pageview √ó 25 KB ‚âà **4.8 GB/—Å—É—Ç–∫–∏**

**HTMX –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**

* ~100 000 –∑–∞–ø—Ä–æ—Å–æ–≤ √ó 2 KB ‚âà **0.2 GB/—Å—É—Ç–∫–∏**

**–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**

* 2 000 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π √ó 300 KB √ó 3 –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ ‚âà **1.7 GB/—Å—É—Ç–∫–∏**

**–ò—Ç–æ–≥–æ**

* –°–µ—Ä–≤–∏—Å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫: ~**5.0 GB/—Å—É—Ç–∫–∏**
* –û–±—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏: ~**6.7 GB/—Å—É—Ç–∫–∏**

---

### 3.4 –û–±—ä—ë–º—ã –¥–∏—Å–∫–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**PostgreSQL**

* –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å—Ç–∞ (—Ç–µ–∫—Å—Ç + –∏–Ω–¥–µ–∫—Å—ã): ~2 KB
* 2 000 –ø–æ—Å—Ç–æ–≤/—Å—É—Ç–∫–∏ ‚Üí ~**1.5 GB/–≥–æ–¥**

**–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**

* ~300 KB –Ω–∞ —Ñ–∞–π–ª
* ~2 000 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/—Å—É—Ç–∫–∏ ‚Üí ~**200 GB/–≥–æ–¥**

–û—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—Å—Ç –æ–±—ä—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –º–µ–¥–∏–∞-—Ñ–∞–π–ª–∞–º–∏, –∞ –Ω–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

---

## 4. –î–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –†–∏—Å—É–Ω–æ–∫ 1 ‚Äî C4 Context Diagram

![C4 Context Diagram](images/C4_Context_Diagram.png)


### –†–∏—Å—É–Ω–æ–∫ 2 ‚Äî C4 Container Diagram


![C4 Container Diagram](images/C4_Container_Diagram.png)

---

## 5. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã API

### üßµ Boards & Threads (API)

- `GET /boards` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å–æ–∫
- `GET /boards/:slug/threads` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–¥–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–æ—Å–∫–∏
- `POST /boards/:slug/threads` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç—Ä–µ–¥–∞
- `PATCH /threads/:id/sticky` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Å–Ω—è—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ç—Ä–µ–¥–∞
- `PATCH /threads/:id/lock` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å —Ç—Ä–µ–¥
- `DELETE /threads/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–¥

### üí¨ Posts (API)

- `GET /threads/:id/posts` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ —Ç—Ä–µ–¥–∞
- `POST /threads/:id/posts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞
- `GET /posts/:id` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ (API)
- `DELETE /posts/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç

### üîê Admin Panel

- `GET /admin/login` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `POST /admin/login` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
- `GET /admin/logout` ‚Äî –≤—ã—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `GET /admin` ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `POST /admin/threads/:id/delete` ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–¥
- `POST /admin/threads/:id/sticky` ‚Äî –∑–∞–∫—Ä–µ–ø–∏—Ç—å/–æ—Ç–∫—Ä–µ–ø–∏—Ç—å —Ç—Ä–µ–¥
- `POST /admin/threads/:id/lock` ‚Äî –∑–∞–∫—Ä—ã—Ç—å/–æ—Ç–∫—Ä—ã—Ç—å —Ç—Ä–µ–¥

## 6. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 6.1 –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (SLA)

* –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: ‚â§ **200 –º—Å**
* –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–¥–æ–≤: ‚â§ **250 –º—Å**
* –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–µ–¥–∞: ‚â§ **300 –º—Å**
* –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–¥–∞: ‚â§ **400 –º—Å**
* –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞: ‚â§ **350 –º—Å**
* –ê–¥–º–∏–Ω-–¥–µ–π—Å—Ç–≤–∏—è: ‚â§ **300 –º—Å**

### 6.2 –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

* –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞: –¥–æ **100 RPS**
* –ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: –¥–æ **300 RPS**

### 6.3 –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

* PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
* –û–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ stateless –∏ –¥–æ–ø—É—Å–∫–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç

### 6.4 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
* –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –∏ —Ç–∏–ø –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
* –ë–∞–∑–æ–≤–æ–µ rate limiting –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏

---

## 7. –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

![–°—Ö–µ–º–∞ –ë–î](images/bd.png)


### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

* –ò–Ω–¥–µ–∫—Å—ã –ø–æ `board_slug`, `bump_at`, `thread_id` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±—ã—Å—Ç—Ä—ã–µ read-–∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ —Ç–∏–ø–∏—á–Ω–æ–π read-heavy –Ω–∞–≥—Ä—É–∑–∫–µ
* –ó–∞–ø–∏—Å—å –ø–æ—Å—Ç–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫–æ—Ä–æ—Ç–∫–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è INSERT —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª—è `bump_at` —É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ç—Ä–µ–¥–∞
* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Å–µ—Ä–≤–µ—Ä–∞ (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `uploads/`), –∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (`image_url`), —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î –∏ –∏–Ω–¥–µ–∫—Å—ã
* –ü–æ–ª—è `tripcode` –∏ `parent_id` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∞–Ω–æ–Ω–∏–º–Ω—É—é –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –¥–ª—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏ –∏–º–∏–¥–∂–±–æ—Ä–¥—ã


---

## 8. –°—Ö–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ 10 —Ä–∞–∑

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**Vagonach Application (Go API + Server-Side Rendering)**  
- –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞ load balancer (nginx / cloud LB).  
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç stateless-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏.  
- –ù–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º, –∫–∞–∂–¥—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ RPS.  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ keep-alive —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ Go (goroutines) —Å–Ω–∏–∂–∞–µ—Ç latency –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ.

**PostgreSQL**  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ö–µ–º–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏:
  - **1 primary** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–¥–æ–≤ –∏ –ø–æ—Å—Ç–æ–≤, –¥–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞);
  - **2‚Äì3 read replicas** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–ø–∏—Å–∫–∏ —Ç—Ä–µ–¥–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–æ–≤).  
- Read-heavy –Ω–∞–≥—Ä—É–∑–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∑–∞ —Å—á—ë—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —á—Ç–µ–Ω–∏–π –Ω–∞ —Ä–µ–ø–ª–∏–∫–∏.  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ connection pooling (–Ω–∞–ø—Ä–∏–º–µ—Ä, PgBouncer) —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ú–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)**  
- –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–Ω–æ—Å—è—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ).  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CDN –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑–¥–∞—á–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–Ω–∏–∂–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é –∏ –¥–∏—Å–∫–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, RAM) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏.  
- –î–ª—è PostgreSQL —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ RAM —É–ª—É—á—à–∞–µ—Ç page cache –∏ —Ä–∞–±–æ—Ç—É –∏–Ω–¥–µ–∫—Å–æ–≤, –∞ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ CPU —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.  
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–µ—Ä–∞ –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø—Ä–µ–¥–µ–ª–æ–≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- **Read-heavy –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ø–µ—Ä–µ–Ω–æ—Å —á—Ç–µ–Ω–∏–π –Ω–∞ read replicas —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ primary –ë–î.  
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–¥–∏–∞-—Ç—Ä–∞—Ñ–∏–∫–∞:** CDN –∏ –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —É–º–µ–Ω—å—à–∞—é—Ç –æ–±—ä—ë–º —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ backend.  
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—è–∂—ë–ª—ã—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Å–ª–æ–∂–Ω—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–∫–∏—Ö –º–µ—Å—Ç –∏ —É–ø—Ä–æ—â–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.


---

## 9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### UNIT —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
go test ./...
```

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:

```bash
go test -v ./...
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
go test ./...
```

–¢–µ—Å—Ç—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç –Ω–∞–ª–∏—á–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ–π PostgreSQL –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

---

## 10. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export DB_HOST=127.0.0.1
export DB_PORT=5432
export DB_NAME=vagonach_db
export DB_USER=vagonach
export DB_PASS=secret
```

### –°–±–æ—Ä–∫–∞

```bash
go build -o vagonach ./cmd/vagonach
```

### –ó–∞–ø—É—Å–∫

```bash
./vagonach
```

–∏–ª–∏

```bash
go run cmd/vagonach/main.go
```

---

## 11. –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

* Go: ~1455 —Å—Ç—Ä–æ–∫
* CSS: ~2596 —Å—Ç—Ä–æ–∫
* HTML: ~843 —Å—Ç—Ä–æ–∫–∏
* SQL: ~39 —Å—Ç—Ä–æ–∫

**–í—Å–µ–≥–æ:** ~5000 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
